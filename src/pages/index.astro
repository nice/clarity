---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

import Seo from "../components/Seo.astro";
import Layout from "../layouts/Layout.astro";
import Card from "../components/Card.astro";
import TextCard from "../components/TextCard.astro";
import ImageCard from "../components/ImageCard.astro";

import { getCollection } from "astro:content";
const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<Layout>
  <Fragment slot="head">
    <Seo />
  </Fragment>

  <Fragment slot="body">
    <div class="grid">
      <div class="flex gap-6">
        <div class="grid-col w-full md:w-1/2 lg:w-1/3"></div>
        <div class="grid-col w-1/2 hidden md:block lg:w-1/3"></div>
        <div class="grid-col w-1/3 hidden lg:block"></div>
      </div>

      {
        posts.map((post) => {
          let card = null;

          if (post.data.cardType === "default") {
            card = <Card slug={post.slug} {...post.data} />;
          } else if (post.data.cardType === "text") {
            card = <TextCard slug={post.slug} {...post.data} />;
          } else if (post.data.cardType === "image") {
            card = <ImageCard slug={post.slug} {...post.data} />;
          }

          return card;
        })
      }
    </div>
    <!-- .grid -->

    <!-- pagination -->
    <div class="flex justify-between my-12">
      <div>
        <div class="text-2xl">
          <a href="">Previous</a>
        </div>
      </div>

      <div>
        <div class="text-2xl">
          <a href="">Next</a>
        </div>
      </div>
    </div></Fragment
  >
</Layout>
